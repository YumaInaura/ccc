if [[ ! $(which pbcopy) ]]; then
  echo you need pbcopy
  exit
fi

if [ -z $(history 0) ]; then
  # FIXME: does not work well
  echo -n $(history | grep -v 'history' | tail -n 1 | sed -e 's/^[ 0-9]*//g')
else
  echo -n $(history 0 | tail -n 1 | sed -e "s/^[0-9 ]*//g") | pbcopy
fi

